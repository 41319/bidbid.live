{"version":3,"sources":["webpack:///./node_modules/grommet/es6/components/Anchor/StyledAnchor.js","webpack:///./node_modules/grommet/es6/components/Anchor/Anchor.js","webpack:///./src/components/Chat/SpeechBubble.js","webpack:///./node_modules/grommet-icons/es6/icons/Send.js","webpack:///./src/components/Chat/ChatTextInput.js","webpack:///./src/components/Chat/index.js","webpack:///./src/containers/Chatroom/index.js","webpack:///./node_modules/grommet/es6/components/Heading/StyledHeading.js","webpack:///./node_modules/grommet/es6/components/Heading/Heading.js","webpack:///./src/library/Realtime.js","webpack:///./src/containers/EventObserver.js","webpack:///./node_modules/grommet/es6/components/List/List.js","webpack:///./node_modules/grommet/es6/components/Grid/StyledGrid.js","webpack:///./node_modules/grommet/es6/components/Grid/Grid.js","webpack:///./src/containers/Chat/ChatroomList.js","webpack:///./src/containers/Chat/index.js","webpack:///./src/pages/chat.js"],"names":["StyledAnchor","a","withConfig","displayName","componentId","props","size","data","theme","text","height","colorProp","anchor","color","weight","fontWeight","hasIcon","textDecoration","disabled","hover","extend","hasLabel","global","edgeSize","small","focus","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","defaultProps","setPrototypeOf","Anchor","_ref","ref","a11yTitle","children","href","icon","label","_onBlur","onBlur","onClick","_onFocus","onFocus","reverse","rest","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","_useState","setFocus","console","warn","coloredIcon","first","second","createElement","undefined","event","Box","as","direction","align","gap","responsive","style","display","AnchorWrapper","Component","right","message","pad","fill","overflow","flex","shrink","round","border","background","margin","left","Text","senderName","isThirdPerson","StyledIcon","viewBox","stroke","strokeWidth","d","onSubmit","placeholder","value","useState","textInputValue","setTextInputValue","TextInput","onKeyPress","plain","onChange","cursor","messages","onSendMessage","textInputPlaceholder","roleProfiles","container","useRef","qs","getQueryString","useEffect","current","scrollTo","scrollHeight","borderRadius","map","SpeechBubble","ChatTextInput","publicRoom","senderRoleName","recipientRoleName","chatroomName","chatroomId","sort","join","setMessages","createEvent","setCreateEvent","modelToMessage","models","c","name","role","findChatroomMessage","then","e","Heading","level","Chat","sendChatroomMessage","EventObserver","objectClass","onEvent","action","colorStyle","StyledHeading","h1","font","heading","family","headingTheme","levelStyle","styles","fillProp","maxWidth","medium","responsiveBreakpoint","breakpoint","breakpoints","responsiveData","push","textAlign","truncate","HeadingWrapper","liveClient","Parse","LiveQueryClient","applicationId","serverURL","javascriptKey","sessionToken","User","getSessionToken","open","Home","componentDidMount","query","Query","ascending","limit","subscription","rtClient","subscribe","on","componentWillUnmount","close","render","React","StyledList","ul","tabIndex","forceOutline","skipSvgChildren","itemFocus","list","StyledItem","item","normalize","index","property","List","forwardRef","itemProps","primaryKey","secondaryKey","step","onClickItem","onMore","listRef","active","setActive","_useState2","setItemFocus","onEnter","persist","adjustedEvent","onUp","onDown","Math","min","items","scrollableAncestor","renderMarker","marker","content","boxProps","justify","adjustedBackground","Array","isArray","clickProps","adjustedBorder","onMouseOver","onMouseOut","tag","ListWrapper","ALIGN_MAP","center","end","start","stretch","alignStyle","ALIGN_CONTENT_MAP","around","between","alignContentStyle","alignContent","JUSTIFY_MAP","justifyStyle","JUSTIFY_CONTENT_MAP","justifyContentStyle","justifyContent","SIZE_MAP","full","getRepeatSize","sizeFor","isRow","mapped","fillContainer","StyledGrid","div","attrs","a11yTitleProp","areas","rowsProp","columns","every","area","cells","forEach","row","column","r","areasStyle","s","count","gapSize","gapStyle","grid","Grid","_props$responsive","rows","GridWrapper","available","window","CSS","supports","initialActiveId","chatroom","setChatroom","activeRoom","profileLookup","setProfileLookup","findChatroomForUser","chatrooms","roleNames","reduce","p","n","concat","get","split","getRolePublicProfile","publicRoles","clookup","names","filter","id","found","find","pr","rolePublicProfile","loadChatroom","width","recipientName","objectId","recipentProfile","setRecipentProfile","gridArea","ChatroomList","onActive","Chatroom","basepath","path"],"mappings":"qNAeIA,EAAe,UAAOC,EAAEC,WAAW,CACrCC,YAAa,eACbC,YAAa,gBAFI,CAGhB,CAAC,yBAA0B,UAAW,IAAK,oBAAqB,mBAAoB,IAAK,IAAK,IAAK,IAAK,IAAK,KAAK,SAAUC,GAC7H,OAdc,SAAmBA,GACjC,GAAIA,EAAMC,KAAM,CACd,IAAIA,EAAOD,EAAMC,MAAQ,SACrBC,EAAOF,EAAMG,MAAMC,KAAKH,GAC5B,OAAO,cAAI,CAAC,aAAc,gBAAiB,KAAMC,EAAKD,KAAMC,EAAKG,QAGnE,OAAO,cAAI,CAAC,2CAOL,CAAUL,MAChB,SAAUA,GACX,OAAO,YAAeA,EAAMM,WAAaN,EAAMG,MAAMI,OAAOC,MAAOR,EAAMG,UACxE,SAAUH,GACX,OAAOA,EAAMS,OAAS,gBAAkBT,EAAMS,OAAS,IAAMT,EAAMG,MAAMI,OAAOG,YAAc,gBAAkBV,EAAMG,MAAMI,OAAOG,WAAa,OAC/I,SAAUV,GACX,OAAOA,EAAMW,QAAU,OAASX,EAAMG,MAAMI,OAAOK,iBAClD,KAAe,SAAUZ,GAC1B,OAAQA,EAAMa,UAAYb,EAAMG,MAAMI,OAAOO,OAAS,cAAI,CAAC,WAAY,IAAK,IAAK,KAAMd,EAAMG,MAAMI,OAAOO,MAAMF,gBAAkB,oBAAsBZ,EAAMG,MAAMI,OAAOO,MAAMF,eAAiB,IAAKZ,EAAMG,MAAMI,OAAOO,MAAMJ,YAAc,gBAAkBV,EAAMG,MAAMI,OAAOO,MAAMJ,WAAa,IAAKV,EAAMG,MAAMI,OAAOO,MAAMC,WACnU,SAAUf,GACX,OAAOA,EAAMW,UAAYX,EAAMgB,UAAY,kBAAoBhB,EAAMG,MAAMc,OAAOC,SAASC,MAAQ,WAClG,SAAUnB,GACX,OAAOA,EAAMa,UA5BK,uEA6BjB,SAAUb,GACX,OAAOA,EAAMoB,OAAS,iBACrB,SAAUpB,GACX,OAAOA,EAAMG,MAAMI,OAAOQ,UCnC5B,SAASM,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WDsB9B/B,EAAawC,aAAe,GAC5Bb,OAAOc,eAAezC,EAAawC,aAAc,KCCjD,IAAIE,EAAsB,sBAAW,SAAUC,EAAMC,GACnD,IAAIC,EAAYF,EAAKE,UACjBC,EAAWH,EAAKG,SAChBjC,EAAQ8B,EAAK9B,MACbK,EAAWyB,EAAKzB,SAChB6B,EAAOJ,EAAKI,KACZC,EAAOL,EAAKK,KACZC,EAAQN,EAAKM,MACbC,EAAUP,EAAKQ,OACfC,EAAUT,EAAKS,QACfC,EAAWV,EAAKW,QAChBC,EAAUZ,EAAKY,QACfC,EAjCN,SAAuCvB,EAAQwB,GAC7C,GAAc,MAAVxB,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACT6B,EAAa/B,OAAOgC,KAAK1B,GAG7B,IAAKH,EAAI,EAAGA,EAAI4B,EAAW1B,OAAQF,IACjCI,EAAMwB,EAAW5B,GACb2B,EAASG,QAAQ1B,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EAqBIgC,CAA8BlB,EAAM,CAAC,YAAa,WAAY,QAAS,WAAY,OAAQ,OAAQ,QAAS,SAAU,UAAW,UAAW,YAEnJnC,EAAQ,qBAAW,iBAAiB,IAAaA,MAEjDsD,EAAY,qBACZrC,EAAQqC,EAAU,GAClBC,EAAWD,EAAU,GAEzB,qBAAU,YACHd,GAAQC,IAAUH,GACrBkB,QAAQC,KAAK,kEAEd,CAACnB,EAAUE,EAAMC,IACpB,IAAIiB,EAAclB,EAEdA,IAASA,EAAK3C,MAAMQ,QACtBqD,EAA2B,uBAAalB,EAAM,CAC5CnC,MAAO,YAAeA,GAASL,EAAMI,OAAOC,MAAOL,MAIvD,IAAI2D,EAAQZ,EAAUN,EAAQiB,EAC1BE,EAASb,EAAUW,EAAcjB,EACrC,OAAoB,IAAMoB,cAAcrE,EAAc0B,EAAS,GAAI8B,EAAM,CACvEZ,IAAKA,EACL,aAAcC,EACdlC,UAAWE,EACXK,SAAUA,EACVF,UAAWgC,EACXvB,MAAOA,EACPJ,SAAU4B,EACVM,QAASA,EACTR,KAAO7B,OAAkBoD,EAAPvB,EAClBK,QAAUlC,OAAqBoD,EAAVlB,EACrBE,QAAS,SAAiBiB,GACxBR,GAAS,GACLV,GAAUA,EAASkB,IAEzBpB,OAAQ,SAAgBoB,GACtBR,GAAS,GACLb,GAASA,EAAQqB,MAErBJ,GAASC,EAAsB,IAAMC,cAAcG,EAAA,EAAK,CAC1DC,GAAI,OACJC,UAAW,MACXC,MAAO,SACPC,IAAK,QACLC,YAAY,EACZC,MAAO,CACLC,QAAS,gBAEVZ,EAAOC,GAAUD,GAASC,GAAUtB,MAEzCJ,EAAOvC,YAAc,SAQrB,IAAI6E,EAA6BtC,G,qFCvFlBuC,EAtBG,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QAC1B,OACE,kBAACX,EAAA,EAAD,CAAKY,IAAI,QAAQC,MAAM,EAAMX,UAAU,OACrC,kBAACF,EAAA,EAAD,CACEc,SAAS,UACTC,KAAM,CAAEC,OAAQ,GAChBH,MAAM,EACNI,MAAM,MACNL,IAAI,QACJM,OAAO,MACPC,WAAW,QACXC,OAAQ,CAAEC,KAAMX,EAAQ,OAAS,MAEjC,kBAACY,EAAA,EAAD,KAAOX,EAAQY,YACf,6BACCZ,EAAQA,QACRA,EAAQa,iB,wBCnBjB,SAAStE,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WAKvB,IAAI,EAAO,SAAc1B,GAC9B,OAAoB,IAAMgE,cAAc4B,EAAA,EAAYvE,EAAS,CAC3DwE,QAAS,YACTrD,UAAW,QACVxC,GAAqB,IAAMgE,cAAc,OAAQ,CAClDgB,KAAM,OACNc,OAAQ,OACRC,YAAa,IACbC,EAAG,+KCSQpB,EAjCG,SAAC,GAA2C,IAAzCqB,EAAwC,EAAxCA,SAAUC,EAA8B,EAA9BA,YAA8B,IAAjBC,aAAiB,MAAT,GAAS,IACfC,mBAASD,GAA9CE,EADoD,KACpCC,EADoC,KAE3D,OACE,kBAACnC,EAAA,EAAD,CAAKkB,OAAO,kBAAkBhB,UAAU,OACtC,kBAACkC,EAAA,EAAD,CACEL,YAAaA,EACbhD,SAAS,EACTiD,MAAOE,EACPG,WAAY,SAACtC,GACO,UAAdA,EAAMrC,MACRoE,GAAYA,EAASI,GACrBC,EAAkB,MAGtBG,OAAK,EACLC,SAAU,SAACxC,GACToC,EAAkBpC,EAAM1C,OAAO2E,UAGnC,kBAAChC,EAAA,EAAD,CACEpB,QAAS,WACPkD,GAAYA,EAASI,GACrBC,EAAkB,KAEpBvB,IAAI,QACJN,MAAO,CAAEpE,OAAQ,OAAQsG,OAAQ,YAEjC,kBAAC,EAAD,CAAMlC,MAAO,CAAEpE,OAAQ,OAAQsG,OAAQ,gB,YCehC/B,EAzCG,SAAC,GAKZ,IAJLgC,EAII,EAJJA,SACAC,EAGI,EAHJA,cAEAC,GACI,EAFJC,aAEI,EADJD,sBAEME,EAAYC,iBAAO,MACnBC,EAAKC,cAKX,OAJAC,qBAAU,WACRJ,GAAaA,EAAUK,QAAQC,SAAS,EAAGN,EAAUK,QAAQE,gBAC5D,CAACX,IAGF,oCACE,yBACErE,IAAKyE,EACLvC,MAAO,CACL+C,aAAc,MACdnC,OAAQ,iBACRJ,SAAU,SACV5E,OAAQ,sBAGV,kBAAC8D,EAAA,EAAD,KACE,kBAACA,EAAA,EAAD,KACGyC,GACCA,EAASa,KAAI,SAAC3C,EAASrD,GACrB,OAAO,kBAACiG,EAAD,CAAc5C,QAASA,UAKxC,kBAAC6C,EAAD,CACExB,MAAOe,GAAMA,EAAE,KACfhB,YAAaY,EACbb,SAAUY,M,oCC6BHjC,IA3DG,SAAC,GAMZ,IALLgD,EAKI,EALJA,WACAC,EAII,EAJJA,eACAC,EAGI,EAHJA,kBACAC,EAEI,EAFJA,aACA7B,EACI,EADJA,YAEM8B,EAAaJ,EACfE,EACU,CAACD,EAAgBC,GAZpBG,OAAOC,KAAK,KASnB,EAI4B9B,mBAAS,IAAlCQ,EAJH,KAIauB,EAJb,OAKkC/B,mBAAS,MAAxCgC,EALH,KAKgBC,EALhB,KAOEC,EAAiB,SAACC,GACtB,OAAOA,EAAOd,KAAI,SAACe,GACjB,MAAO,CACL1D,QAAS0D,EAAE1D,QACXY,WAAY8C,EAAEC,KACd9C,cAAe6C,EAAEE,OAASb,OAmBhC,OAdAT,qBAAU,WACRuB,YAAoBX,GAAYY,MAAK,SAACC,GACpCV,EAAYG,EAAeO,SAE5B,CAACb,IAEJZ,qBAAU,WACJgB,GACFO,YAAoBX,GAAYY,MAAK,SAACC,GACpCV,EAAYG,EAAeO,SAG9B,CAACT,IAGF,oCACGL,GAAgB,kBAACe,EAAA,EAAD,CAASC,MAAO,GAAhB,IAAqBhB,EAArB,KACjB,kBAACiB,EAAD,CACElC,qBAAsBZ,EACtBW,cAAe,SAACgC,GACdI,YAAoBpB,EAAgBD,EAAYiB,EAAGf,IAErDlB,SAAUA,IAEZ,kBAACsC,EAAA,EAAD,CACEC,YAAa,kBACbC,QAAS,SAACP,EAAGQ,GACI,WAAXA,GACFhB,EAAeQ,S,yJChBvBS,EAAa,cAAI,CAAC,SAAU,MAAM,SAAUtJ,GAC9C,OAAO,YAAeA,EAAMM,UAAWN,EAAMG,UAE3CoJ,EAAgB,UAAOC,GAAG3J,WAAW,CACvCC,YAAa,gBACbC,YAAa,gBAFK,CAGjB,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAe,SAAUC,GAClE,OAnBe,SAAoBA,GACnC,IACIyJ,GADOzJ,EAAMG,MAAMuJ,QAAQX,MAAM/I,EAAM+I,QAAU,IACrCU,KAEhB,OAAIA,GAAQA,EAAKE,OACR,cAAI,CAAC,eAAgB,KAAMF,EAAKE,QAGlC3J,EAAMG,MAAMuJ,QAAQD,KAAO,cAAI,CAAC,eAAgB,KAAMzJ,EAAMG,MAAMuJ,QAAQD,KAAKE,QAAU,GAWzF,CAAW3J,MACjB,SAAUA,GACX,OAlDc,SAAmBA,GAEjC,IAAIC,EAAOD,EAAMC,MAAQ,SACrB2J,EAAe5J,EAAMG,MAAMuJ,QAC3BG,EAAaD,EAAab,MAAM/I,EAAM+I,OAE1C,GAAIc,EAAY,CACd,IAAI3J,EAAO2J,EAAW5J,GAClB6J,EAAS,CAAC,cAAI,CAAC,aAAc,gBAAiB,cAAe,gBAAiB,KAAM5J,EAAOA,EAAKD,KAAOA,EAAMC,EAAOA,EAAKG,OAAS,UAAUL,EAAM+J,SAAY,OAAU7J,GAAQA,EAAK8J,WAAYH,EAAWI,OAAOD,SAAUH,EAAWJ,KAAKhJ,QAAUmJ,EAAanJ,SAExQ,GAAIT,EAAMwE,YAAcoF,EAAaM,qBAAsB,CACzD,IAAIC,EAAanK,EAAMG,MAAMc,OAAOmJ,YAAYR,EAAaM,sBAE7D,GAAIC,EAAY,CACd,IAAIE,EAAiBT,EAAab,MAAM/I,EAAM+I,MAAQ,GAAKa,EAAab,MAAM/I,EAAM+I,MAAQ,GAAG9I,GAAQ2J,EAAab,MAAM/I,EAAM+I,OAAO9I,GAEnIoK,GACFP,EAAOQ,KAAK,YAAgBH,EAAY,4BAA8BE,EAAepK,KAAO,+BAAiCoK,EAAehK,OAAS,8BAAgCL,EAAM+J,SAAY,OAAUM,EAAeL,UAAY,mBAKlP,OAAOF,EAIT,OADAnG,QAAQC,KAAK,iBAAmB5D,EAAM+I,MAAQ,kCACvC,GAwBA,CAAU/I,MAChB,SAAUA,GACX,OAAOA,EAAMuK,WAAa,OACzB,SAAUvK,GACX,OAAOA,EAAMwK,UAdK,iFAejB,SAAUxK,GACX,OAAOA,EAAMM,WAAagJ,KACzB,SAAUtJ,GACX,OAAOA,EAAMG,MAAMuJ,SAAW1J,EAAMG,MAAMuJ,QAAQ3I,UC9DpD,SAASM,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WDiD9B6H,EAAcpH,aAAe,GAC7Bb,OAAOc,eAAemH,EAAcpH,aAAc,KC9BlD,IAAI2G,EAAuB,sBAAW,SAAUxG,EAAMC,GACpD,IAAI/B,EAAQ8B,EAAK9B,MACbwE,EAAO1C,EAAK0C,KACZ+D,EAAQzG,EAAKyG,MACb5F,EArBN,SAAuCvB,EAAQwB,GAC7C,GAAc,MAAVxB,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACT6B,EAAa/B,OAAOgC,KAAK1B,GAG7B,IAAKH,EAAI,EAAGA,EAAI4B,EAAW1B,OAAQF,IACjCI,EAAMwB,EAAW5B,GACb2B,EAASG,QAAQ1B,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EASIgC,CAA8BlB,EAAM,CAAC,QAAS,OAAQ,UAGjE,OAAoB,IAAM0B,cAAcuF,EAAelI,EAAS,CAC9D+C,GAAI,IAAM2E,EACVzI,UAAWE,EACXuJ,SAAU/E,EACV+D,OAAQA,GACP5F,EAAM,CACPZ,IAAKA,QAGTuG,EAAQhJ,YAAc,UACtBgJ,EAAQ3G,aAAe,CACrB4G,MAAO,EACPvE,YAAY,GASd,IAAIiG,EAA+B3B,G,sCC9D/B4B,E,6CACCA,IACHA,EAAa,IAAIC,IAAMC,gBAAgB,CACrCC,cAAe,2CACfC,UAAW,sBACXC,cAAe,2CACfC,aAAcL,IAAMM,KAAK5D,UACrBsD,IAAMM,KAAK5D,UAAU6D,uBACrBjH,KAEKkH,OAEET,QCTTU,E,0GACJC,kBAAA,WAAqB,IAAD,EACenJ,KAAKlC,MAA9BoJ,EADU,EACVA,QAASD,EADC,EACDA,YACjB,GAAIA,EAAa,CACf,IAAImC,EAAQ,IAAIX,IAAMY,MAAMpC,GAC5BmC,EAAME,UAAU,aAAaC,MAAM,GACnC,IAAMC,EAAeC,EAASC,UAAUN,GACxCI,EAAaG,GAAG,UAAU,SAAChD,GAAD,OAAOO,GAAWA,EAAQP,EAAG,aACvD6C,EAAaG,GAAG,UAAU,SAAChD,GAAD,OAAOO,GAAWA,EAAQP,EAAG,aACvD6C,EAAaG,GAAG,UAAU,SAAChD,GAAD,OAAOO,GAAWA,EAAQP,EAAG,e,EAI3DiD,qBAAA,WACEH,EAASI,S,EAEXC,OAAA,WACE,OAAO,sC,GAjBQC,IAAMrH,WAqBVwG,O,kCCzBf,wJAAS/J,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WAyB9B,IAAIwK,EAAa,UAAOC,GAAGtM,WAAW,CACpCC,YAAa,mBACbC,YAAa,gBAFE,CAGd,CAAC,mBAAoB,cAAe,YAAa,IAAK,IAAK,MAAM,SAAUC,GAC5E,OAAQA,EAAMuF,QAAU,eACvB,KAAe,SAAUvF,GAC1B,OAAOA,EAAMoM,UAAY,GAAK,YAAW,CACvCC,cAAc,EACdC,iBAAiB,OAElB,SAAUtM,GACX,OAAOA,EAAMuM,WAAa,YAAW,CACnCF,cAAc,EACdC,iBAAiB,OAElB,SAAUtM,GACX,OAAOA,EAAMG,MAAMqM,MAAQxM,EAAMG,MAAMqM,KAAKzL,UAE1C0L,EAAa,kBAAO,KAAK5M,WAAW,CACtCC,YAAa,mBACbC,YAAa,gBAFE,CAGd,CAAC,GAAI,YAAa,IAAK,KAAK,SAAUC,GACvC,OAAOA,EAAM+C,SAAW,qBACvB,YAAa,CACdsJ,cAAc,EACdC,iBAAiB,KACf,SAAUtM,GACZ,OAAOA,EAAMG,MAAMqM,MAAQxM,EAAMG,MAAMqM,KAAKE,MAAQ1M,EAAMG,MAAMqM,KAAKE,KAAK3L,UAGxE4L,EAAY,SAAmBD,EAAME,EAAOC,GAC9C,MAAwB,mBAAbA,EACFA,EAASH,EAAME,GAGjBF,EAAKG,IAGVC,EAAoB,IAAMC,YAAW,SAAUzK,EAAMC,GACvD,IAAI8G,EAAS/G,EAAK+G,OACdjF,EAAK9B,EAAK8B,GACVkB,EAAahD,EAAKgD,WAClBD,EAAS/C,EAAK+C,OACd5C,EAAWH,EAAKG,SAChBvC,EAAOoC,EAAKpC,KAEZ8M,GADQ1K,EAAKlB,MACDkB,EAAK0K,WACjBjI,EAAMzC,EAAKyC,IACXkI,EAAa3K,EAAK2K,WAClBC,EAAe5K,EAAK4K,aACpBC,EAAO7K,EAAK6K,KACZC,EAAc9K,EAAK8K,YACnBC,EAAS/K,EAAK+K,OACdlK,EA3EN,SAAuCvB,EAAQwB,GAC7C,GAAc,MAAVxB,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACT6B,EAAa/B,OAAOgC,KAAK1B,GAG7B,IAAKH,EAAI,EAAGA,EAAI4B,EAAW1B,OAAQF,IACjCI,EAAMwB,EAAW5B,GACb2B,EAASG,QAAQ1B,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EA+DIgC,CAA8BlB,EAAM,CAAC,SAAU,KAAM,aAAc,SAAU,WAAY,OAAQ,QAAS,YAAa,MAAO,aAAc,eAAgB,OAAQ,cAAe,WAE1LgL,EAAU,YAAgB/K,GAC1BpC,EAAQ,qBAAW,gBAEnBsD,EAAY,qBACZ8J,EAAS9J,EAAU,GACnB+J,EAAY/J,EAAU,GAEtBgK,EAAa,qBACblB,EAAYkB,EAAW,GACvBC,EAAeD,EAAW,GAE9B,OAAoB,IAAMzJ,cAAc,IAAU,CAChD2J,QAASP,GAAeG,GAAU,EAAI,SAAUrJ,GAC9CA,EAAM0J,UACN,IAAIC,EAAgB3J,EACpB2J,EAAcnB,KAAOxM,EAAKqN,GAC1BM,EAAcjB,MAAQW,EACtBH,EAAYS,SACV5J,EACJ6J,KAAMV,GAAeG,EAAS,WAC5BC,EAAUD,EAAS,SACjBtJ,EACJ8J,OAAQX,GAAelN,GAAQA,EAAKyB,OAAS,WAC3C6L,EAAUD,GAAU,EAAIS,KAAKC,IAAIV,EAAS,EAAGrN,EAAKyB,OAAS,GAAK,SAC9DsC,GACU,IAAMD,cAAckI,EAAY7K,EAAS,CACvDkB,IAAK+K,EACLlJ,GAAIA,GAAM,KACVmI,UAAWA,EACXH,SAAUgB,EAAc,OAAInJ,GAC3Bd,GAAoB,IAAMa,cAAc,IAAgB,CACzDkK,MAAOhO,EACPmN,OAAQA,EACRc,mBAAoB,SACpBhB,KAAMA,EACNiB,aAAc,SAAsBC,GAClC,OAAoB,IAAMrK,cAAc,IAAK,CAC3CI,GAAI,KACJc,MAAM,GACLmJ,MAEJ,SAAU3B,EAAME,GACjB,IAAI0B,EACAC,EAAW,GAEX9L,EACF6L,EAAU7L,EAASiK,EAAME,EAAOQ,EAAc,CAC5CG,OAAQA,IAAWX,QACjB3I,GACKgJ,GAEPqB,EADwB,mBAAfrB,EACCA,EAAWP,EAAME,GAEJ,IAAM5I,cAAc,IAAM,CAC/CnC,IAAK,IACLpB,OAAQ,QACPkM,EAAUD,EAAME,EAAOK,IAGxBC,IAEAoB,EAD0B,mBAAjBpB,EACC,CAACoB,EAASpB,EAAaR,EAAME,IAE7B,CAAC0B,EAAsB,IAAMtK,cAAc,IAAM,CACzDnC,IAAK,KACJ8K,EAAUD,EAAME,EAAOM,KAG5BqB,EAAW,CACTlK,UAAW,MACXC,MAAO,SACPkK,QAAS,UACTjK,IAAK,YAIT+J,EADyB,iBAAT5B,EACNA,EAAKpL,OAAOgC,KAAKoJ,GAAM,IAEvBA,EAGRrD,IACFiF,EAAU,CAAc,IAAMtK,cAAc,IAAK,CAC/CM,MAAO,QACPzC,IAAK,kBAAoB+K,GACxB0B,GAAUjF,EAAOqD,EAAME,IAC1B2B,EAAW,CACTlK,UAAW,MACXC,MAAO4I,EAAe,QAAU,SAChCsB,QAAS,UACTjK,IAAK,WAIT,IAAIkK,EAAqBnJ,GAAcnF,EAAMqM,KAAKE,KAAKpH,WAEnDiI,IAAWX,EACb6B,EAAqBtO,EAAMc,OAAOH,MAAMwE,WAC/BoJ,MAAMC,QAAQF,KACvBA,EAAqBA,EAAmB7B,EAAQ6B,EAAmB9M,SAGrE,IAUIiN,EAVAC,OAA4B5K,IAAXoB,EAAuBA,EAASlF,EAAMqM,KAAKE,KAAKrH,OA4CrE,MA1CuB,eAAnBwJ,GAAmCjC,IACrCiC,EAAiB,UAGf7B,GAAaA,EAAUJ,KACzB2B,EAAWlN,EAAS,GAAIkN,EAAUvB,EAAUJ,KAK1CQ,IACFwB,EAAa,CACXxC,UAAW,EACXmB,OAAQA,IAAWX,EACnB7J,QAAS,SAAiBmB,GAExBA,EAAM0J,UACN,IAAIC,EAAgB3J,EACpB2J,EAAcnB,KAAOA,EACrBmB,EAAcjB,MAAQA,EACtBQ,EAAYS,GAGZP,EAAQjG,QAAQjG,SAElB0N,YAAa,WACX,OAAOtB,EAAUZ,IAEnBmC,WAAY,WACV,OAAOvB,OAAUvJ,IAEnBhB,QAAS,WACPuK,EAAUZ,GACVc,GAAa,IAEf5K,OAAQ,WACN0K,OAAUvJ,GACVyJ,GAAa,MAKC,IAAM1J,cAAcyI,EAAYpL,EAAS,CAC3DQ,IAAK+K,EACLoC,IAAK,KACL9J,MAAM,EACNH,IAAKA,GAAO5E,EAAMqM,KAAKE,KAAK3H,IAC5BO,WAAYmJ,EACZpJ,OAAQwJ,GACPN,EAAUK,GAAaN,WAG9BxB,EAAKhN,YAAc,OAOnB,IAAImP,EAAyBnC,G,8HC9OzBoC,EAAY,CACdC,OAAQ,SACRC,IAAK,WACLC,MAAO,aACPC,QAAS,WAEPC,EAAa,cAAI,CAAC,eAAgB,MAAM,SAAUvP,GACpD,OAAOkP,EAAUlP,EAAMsE,UAErBkL,EAAoB,CACtBC,OAAQ,eACRC,QAAS,gBACTP,OAAQ,SACRC,IAAK,WACLC,MAAO,aACPC,QAAS,WAEPK,EAAoB,cAAI,CAAC,iBAAkB,MAAM,SAAU3P,GAC7D,OAAOwP,EAAkBxP,EAAM4P,iBAE7BC,EAAc,CAChBV,OAAQ,SACRC,IAAK,WACLC,MAAO,aACPC,QAAS,WAEPQ,EAAe,cAAI,CAAC,iBAAkB,MAAM,SAAU9P,GACxD,OAAO6P,EAAY7P,EAAMwO,YAEvBuB,EAAsB,CACxBN,OAAQ,eACRC,QAAS,gBACTP,OAAQ,SACRC,IAAK,WACLC,MAAO,aACPC,QAAS,WAEPU,EAAsB,cAAI,CAAC,mBAAoB,MAAM,SAAUhQ,GACjE,OAAO+P,EAAoB/P,EAAMiQ,mBAwB/BC,EAAW,CACbhL,KAAM,MACNiL,KAAM,OACN,MAAO,MACP,MAAO,MACP,MAAO,MACP,MAAO,MACP,MAAO,SACP,MAAO,UAOLC,EAAgB,SAAuBnQ,EAAME,GAC/C,OAAIuO,MAAMC,QAAQ1O,GACT,WAAaE,EAAMc,OAAOhB,KAAKA,EAAK,KAAOA,EAAK,IAAM,MAAQE,EAAMc,OAAOhB,KAAKA,EAAK,KAAOA,EAAK,IAAM,IAGnG,SAATA,EAAwB,MACrB,WAAaE,EAAMc,OAAOhB,KAAKA,IAASA,GAAQ,UAGrDoQ,EAAU,SAAiBpQ,EAAMD,EAAOsQ,GAC1C,IAAIC,EAASL,EAASjQ,GAMtB,OAJIqQ,IAASC,GAAYvQ,EAAMwQ,eAAyC,eAAxBxQ,EAAMwQ,eACpD7M,QAAQC,KAAK,qDAGR2M,GAAUvQ,EAAMG,MAAMc,OAAOhB,KAAKA,IAASA,GAkEhDwQ,EAAa,UAAOC,IAAIC,OAAM,SAAU3Q,GAC1C,MAAO,CACL,aAAcA,EAAM4Q,kBAErB/Q,WAAW,CACZC,YAAa,aACbC,YAAa,gBANE,CAOd,CAAC,sCAAuC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAe,SAAUC,GACnI,OAAOA,EAAMqF,SAAWqJ,MAAMC,QAAQ3O,EAAMqF,QAAUrF,EAAMqF,OAAOoC,KAAI,SAAUpC,GAC/E,OAAO,YAAYA,EAAQrF,EAAMwE,WAAYxE,EAAMG,UAChD,YAAYH,EAAMqF,OAAQrF,EAAMwE,WAAYxE,EAAMG,WACtD,SAAUH,GACX,OA3LiCgF,EA2LhBhF,EAAMwQ,eAtLV,eAATxL,EACK,eAGI,aAATA,EACK,gBAGF,kDAXEA,EAFK,IAAmBA,KA4LhC,SAAUhF,GACX,OAAOA,EAAMsE,OAASiL,KACrB,SAAUvP,GACX,OAAOA,EAAM4P,cAAgBD,KAC5B,SAAU3P,GACX,OAAOA,EAAM6Q,OAjDE,SAAoB7Q,GAMnC,GAJK0O,MAAMC,QAAQ3O,EAAM8Q,WAAcpC,MAAMC,QAAQ3O,EAAM+Q,UACzDpN,QAAQC,KAAK,4DAGX8K,MAAMC,QAAQ3O,EAAM6Q,QAAU7Q,EAAM6Q,MAAMG,OAAM,SAAUC,GAC5D,OAAOvC,MAAMC,QAAQsC,MAErB,MAAO,wBAA0BjR,EAAM6Q,MAAMpJ,KAAI,SAAUwJ,GACzD,MAAO,IAAOA,EAAK/I,KAAK,KAAO,OAC9BA,KAAK,KAAO,IAGjB,IAAIgJ,EAAQlR,EAAM8Q,SAASrJ,KAAI,WAC7B,OAAOzH,EAAM+Q,QAAQtJ,KAAI,WACvB,MAAO,UAUX,OAPAzH,EAAM6Q,MAAMM,SAAQ,SAAUF,GAC5B,IAAK,IAAIG,EAAMH,EAAK5B,MAAM,GAAI+B,GAAOH,EAAK7B,IAAI,GAAIgC,GAAO,EACvD,IAAK,IAAIC,EAASJ,EAAK5B,MAAM,GAAIgC,GAAUJ,EAAK7B,IAAI,GAAIiC,GAAU,EAChEH,EAAME,GAAKC,GAAUJ,EAAKxI,QAIzB,wBAA0ByI,EAAMzJ,KAAI,SAAU6J,GACnD,MAAO,IAAOA,EAAEpJ,KAAK,KAAO,OAC3BA,KAAK,KAAO,IAqBOqJ,CAAWvR,MAChC,SAAUA,GACX,OAAOA,EAAM+Q,SAnFI,SAAsB/Q,GACvC,OAAI0O,MAAMC,QAAQ3O,EAAM+Q,SACf,cAAI,CAAC,yBAA0B,KAAM/Q,EAAM+Q,QAAQtJ,KAAI,SAAU+J,GACtE,OAAI9C,MAAMC,QAAQ6C,GACT,UAAYnB,EAAQmB,EAAE,GAAIxR,GAAS,KAAOqQ,EAAQmB,EAAE,GAAIxR,GAAS,IAGnEqQ,EAAQmB,EAAGxR,MACjBkI,KAAK,MAGmB,iBAAlBlI,EAAM+Q,QACR,cAAI,CAAC,iCAAkC,IAAK,OAlC7B,iBADmBU,EAmCiCzR,EAAM+Q,QAAQU,OAlCvDA,EAAQ,QAAUA,EAkC6CrB,EAAcpQ,EAAM+Q,QAAQ9Q,KAAMD,EAAMG,QAGnI,cAAI,CAAC,2CAA4C,OAAQiQ,EAAcpQ,EAAM+Q,QAAS/Q,EAAMG,QAtChF,IAAwBsR,EA0GnB,CAAazR,MACpC,SAAUA,GACX,OAAOA,EAAMuE,KA5IA,SAAkBvE,GAC/B,GAAyB,iBAAdA,EAAMuE,IAAkB,CACjC,IAAImN,EAAU1R,EAAMG,MAAMc,OAAOC,SAASlB,EAAMuE,MAAQvE,EAAMuE,IAC9D,MAAO,aAAemN,EAAU,IAAMA,EAAU,IAGlD,OAAI1R,EAAMuE,IAAI6M,KAAOpR,EAAMuE,IAAI8M,OACtB,0BAA4BrR,EAAMG,MAAMc,OAAOC,SAASlB,EAAMuE,IAAI6M,MAAQpR,EAAMuE,IAAI6M,KAAO,8BAAgCpR,EAAMG,MAAMc,OAAOC,SAASlB,EAAMuE,IAAI8M,SAAWrR,EAAMuE,IAAI8M,QAAU,UAGrMrR,EAAMuE,IAAI6M,IACL,0BAA4BpR,EAAMG,MAAMc,OAAOC,SAASlB,EAAMuE,IAAI6M,MAAQpR,EAAMuE,IAAI6M,KAAO,UAGhGpR,EAAMuE,IAAI8M,OACL,6BAA+BrR,EAAMG,MAAMc,OAAOC,SAASlB,EAAMuE,IAAI8M,SAAWrR,EAAMuE,IAAI8M,QAAU,UAGtG,GA0HaM,CAAS3R,MAC5B,SAAUA,GACX,OAAOA,EAAMwO,SAAWsB,KACvB,SAAU9P,GACX,OAAOA,EAAMiQ,gBAAkBD,KAC9B,SAAUhQ,GACX,OAAOA,EAAM+E,KAAO,YAAU,UAAW/E,EAAM+E,IAAK/E,EAAMwE,WAAYxE,EAAMG,MAAMc,OAAOC,SAASgJ,qBAAsBlK,EAAMG,UAC7H,SAAUH,GACX,OAAOA,EAAM8Q,UA3EC,SAAmB9Q,GACjC,OAAI0O,MAAMC,QAAQ3O,EAAM8Q,UACf,cAAI,CAAC,sBAAuB,KAAM9Q,EAAM8Q,SAASrJ,KAAI,SAAU+J,GACpE,OAAI9C,MAAMC,QAAQ6C,GACT,UAAYnB,EAAQmB,EAAE,GAAIxR,GAAO,GAAQ,KAAOqQ,EAAQmB,EAAE,GAAIxR,GAAO,GAAQ,IAG/EqQ,EAAQmB,EAAGxR,GAAO,MACxBkI,KAAK,MAGH,cAAI,CAAC,kBAAmB,KAAMlI,EAAMG,MAAMc,OAAOhB,KAAKD,EAAM8Q,WAgE1C,CAAU9Q,MAClC,SAAUA,GACX,OAAOA,EAAMG,MAAMyR,MAAQ5R,EAAMG,MAAMyR,KAAK7Q,UCnN9C,SAASM,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GAEvB,IAAK,IAAII,KAAOD,EACVN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAC/CL,EAAOK,GAAOD,EAAOC,IAK3B,OAAOL,IAGOS,MAAMC,KAAMR,WDsM9B+O,EAAWtO,aAAe,GAC1Bb,OAAOc,eAAeqO,EAAWtO,aAAc,KCnL/C,IAAI0P,EAAoB,sBAAW,SAAU7R,EAAOuC,GAClD,IAAIC,EAAYxC,EAAMwC,UAClB6C,EAASrF,EAAMqF,OACfL,EAAOhF,EAAMgF,KACb8M,EAAoB9R,EAAMwE,WAC1BA,OAAmC,IAAtBsN,GAAsCA,EACnDC,EAAO/R,EAAM+R,KACb/C,EAAMhP,EAAMgP,IACZ5K,EAAKpE,EAAMoE,GACXjB,EA1BN,SAAuCvB,EAAQwB,GAC7C,GAAc,MAAVxB,EAAgB,MAAO,GAC3B,IAEIC,EAAKJ,EAFLD,EAAS,GACT6B,EAAa/B,OAAOgC,KAAK1B,GAG7B,IAAKH,EAAI,EAAGA,EAAI4B,EAAW1B,OAAQF,IACjCI,EAAMwB,EAAW5B,GACb2B,EAASG,QAAQ1B,IAAQ,IAC7BL,EAAOK,GAAOD,EAAOC,IAGvB,OAAOL,EAcIgC,CAA8BxD,EAAO,CAAC,YAAa,SAAU,OAAQ,aAAc,OAAQ,MAAO,OAE7G,OAAoB,IAAMgE,cAAcyM,EAAYpP,EAAS,CAC3DkB,IAAKA,EACLqO,cAAepO,EACf4B,IAAKA,GAAM4K,EAAMA,EAAM5K,EACvBiB,OAAQA,EACRmL,cAAexL,EACfR,WAAYA,EACZsM,SAAUiB,GACT5O,OAEL0O,EAAK/R,YAAc,OAOnB,IAAIkS,EAAyBH,EAC7BG,EAAYC,UAA8B,oBAAXC,QAA0BA,OAAOC,KAAOD,OAAOC,IAAIC,UAAYF,OAAOC,IAAIC,SAAS,UAAW,Q,6GCe9GhH,EA3EF,SAAC,GAAyC,IAAvCiH,EAAsC,EAAtCA,gBAAiBxK,EAAqB,EAArBA,eAAqB,EACpBzB,mBAAS,IAAlCkM,EAD6C,KACnCC,EADmC,KAE7CC,EAAcpM,mBAASiM,GAAmB,GAFG,KAGVjM,mBAAS,IAA5CqM,EAH6C,KAG9BC,EAH8B,KA0CpD,OArCAtL,qBAAU,YACU,uCAAG,kCAAAxH,EAAA,sEACK+S,YAAoB9K,GADzB,cACb+K,EADa,OAEnBL,EAAYK,GAENC,EAAYD,EAAUE,QAAO,SAACC,EAAGC,GACrC,OAAOD,EAAEE,OAAOD,EAAEE,IAAI,cAAcC,MAAM,QACzC,IANgB,SAOOC,YAAqBP,GAP5B,OAObQ,EAPa,OAQbC,EAAUV,EAAUE,QAAO,SAACC,EAAGvK,GACnC,IAAM+K,EAAQ/K,EACX0K,IAAI,cACJC,MAAM,KACNK,QAAO,SAAC3K,GAAD,OAAOA,IAAMhB,KAiBvB,OAhBAkL,EAAEvK,EAAEiL,IAAMF,EACP9L,KAAI,SAACuL,GACJ,IAAMU,EAAQL,EAAYM,MACxB,SAACC,GAAD,OAAQA,EAAGlL,MAAQkL,EAAGlL,KAAKwK,IAAI,UAAYF,KAE7C,OAAIU,EAEAA,GACAA,EAAMG,mBACNH,EAAMG,kBAAkBX,IAAI,QAGvB,MAGVhL,KAAK,KACD6K,IACN,IACHL,EAAiBY,GA/BE,4CAAH,qDAkClBQ,KACC,CAACjM,IAEF,oCACE,kBAAC1D,EAAA,EAAD,CAAKa,MAAM,EAAMX,UAAU,OACzB,kBAACyI,EAAA,EAAD,CACEiH,MAAM,OACNtR,SAAU,SAACiK,GACT,IAAMsH,EAAgBvB,EAAc/F,EAAK+G,IACnC3L,EAAoB4E,EACvBwG,IAAI,cACJC,MAAM,KACNK,QAAO,SAAC3K,GAAD,OAAOA,IAAMhB,KACvB,OACE,kBAAC1D,EAAA,EAAD,CACEY,IAAI,QACJO,WAAYkN,IAAe9F,EAAKuH,SAAW,UAAY,SAEvD,kBAAC5R,EAAA,EAAD,CACEK,KAAI,WAAamF,EAAb,MAAiCC,GAEpCkM,KAKTjP,IAAI,IACJkI,WAAW,OACX/M,KAAMoS,OCxBDlH,EA3CF,SAAC,GAA2C,IAAzCvD,EAAwC,EAAxCA,eAAgBC,EAAwB,EAAxBA,kBAAwB,EACR1B,mBAAS,MAAhD8N,EAD+C,KAC9BC,EAD8B,KAQtD,OALA/M,qBAAU,WACRgM,YAAqB,CAACtL,IAAoBc,MAAK,SAACC,GAC9CA,GAAKA,EAAElH,QAAUwS,EAAmBtL,EAAE,GAAGgL,wBAE1C,CAAC/L,IAEF,oCACE,kBAAC,EAAD,CACEvD,IAAI,QACJQ,IAAI,QACJC,MAAI,EACJ6L,MAAO,CACL,CAAEpI,KAAM,OAAQ4G,MAAO,CAAC,EAAG,GAAID,IAAK,CAAC,EAAG,IACxC,CAAE3G,KAAM,OAAQ4G,MAAO,CAAC,EAAG,GAAID,IAAK,CAAC,EAAG,KAE1C2B,QAAS,CAAC,MAAO,OACjBgB,KAAM,CAAC,SAEP,kBAAC5N,EAAA,EAAD,CAAKa,MAAM,EAAMoP,SAAS,OAAO/P,UAAU,OACzC,kBAACgQ,EAAD,CACExM,eAAgBA,EAChBC,kBAAmBA,EACnBwM,SAAU,gBAGd,kBAACnQ,EAAA,EAAD,CAAKiQ,SAAS,OAAOrP,IAAI,SAAS1E,OAAO,SACtCwH,GACC,kBAAC0M,EAAA,EAAD,CACExM,aAAcmM,GAAmBA,EAAgBhB,IAAI,QACrDrL,eAAgBA,EAChBC,kBAAmBA,EACnBF,YAAY,QCzBXwD,UAVF,WACX,OACE,oCACE,kBAAC,SAAD,CAAQoJ,SAAS,SACf,kBAACxL,EAAD,CAAMyL,KAAI","file":"component---src-pages-chat-js-bd4a31585a70dfdefc2e.js","sourcesContent":["import styled, { css } from 'styled-components';\nimport { focusStyle, genericStyles, normalizeColor } from '../../utils';\nimport { defaultProps } from '../../default-props';\nvar disabledStyle = \"\\n  opacity: 0.3;\\n  cursor: default;\\n  text-decoration: none;\\n\";\n\nvar sizeStyle = function sizeStyle(props) {\n  if (props.size) {\n    var size = props.size || 'medium';\n    var data = props.theme.text[size];\n    return css([\"font-size:\", \";line-height:\", \";\"], data.size, data.height);\n  }\n\n  return css([\"font-size:inherit;line-height:inherit;\"]);\n};\n\nvar StyledAnchor = styled.a.withConfig({\n  displayName: \"StyledAnchor\",\n  componentId: \"sc-1rp7lwl-0\"\n})([\"box-sizing:border-box;\", \" color:\", \";\", \" text-decoration:\", \";cursor:pointer;\", \" \", \" \", \" \", \" \", \" \", \"\"], function (props) {\n  return sizeStyle(props);\n}, function (props) {\n  return normalizeColor(props.colorProp || props.theme.anchor.color, props.theme);\n}, function (props) {\n  return props.weight ? \"font-weight: \" + props.weight + \";\" : props.theme.anchor.fontWeight && \"font-weight: \" + props.theme.anchor.fontWeight + \";\";\n}, function (props) {\n  return props.hasIcon ? 'none' : props.theme.anchor.textDecoration;\n}, genericStyles, function (props) {\n  return !props.disabled && props.theme.anchor.hover && css([\"&:hover{\", \" \", \" \", \"}\"], props.theme.anchor.hover.textDecoration && \"text-decoration: \" + props.theme.anchor.hover.textDecoration + \";\", props.theme.anchor.hover.fontWeight && \"font-weight: \" + props.theme.anchor.hover.fontWeight + \";\", props.theme.anchor.hover.extend);\n}, function (props) {\n  return props.hasIcon && !props.hasLabel && \"\\n    padding: \" + props.theme.global.edgeSize.small + \";\\n  \";\n}, function (props) {\n  return props.disabled && disabledStyle;\n}, function (props) {\n  return props.focus && focusStyle();\n}, function (props) {\n  return props.theme.anchor.extend;\n});\nStyledAnchor.defaultProps = {};\nObject.setPrototypeOf(StyledAnchor.defaultProps, defaultProps);\nexport { StyledAnchor };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { cloneElement, forwardRef, useContext, useEffect, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { normalizeColor } from '../../utils';\nimport { Box } from '../Box';\nimport { StyledAnchor } from './StyledAnchor';\nvar Anchor = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n      children = _ref.children,\n      color = _ref.color,\n      disabled = _ref.disabled,\n      href = _ref.href,\n      icon = _ref.icon,\n      label = _ref.label,\n      _onBlur = _ref.onBlur,\n      onClick = _ref.onClick,\n      _onFocus = _ref.onFocus,\n      reverse = _ref.reverse,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"a11yTitle\", \"children\", \"color\", \"disabled\", \"href\", \"icon\", \"label\", \"onBlur\", \"onClick\", \"onFocus\", \"reverse\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  useEffect(function () {\n    if ((icon || label) && children) {\n      console.warn('Anchor should not have children if icon or label is provided');\n    }\n  }, [children, icon, label]);\n  var coloredIcon = icon;\n\n  if (icon && !icon.props.color) {\n    coloredIcon = /*#__PURE__*/cloneElement(icon, {\n      color: normalizeColor(color || theme.anchor.color, theme)\n    });\n  }\n\n  var first = reverse ? label : coloredIcon;\n  var second = reverse ? coloredIcon : label;\n  return /*#__PURE__*/React.createElement(StyledAnchor, _extends({}, rest, {\n    ref: ref,\n    \"aria-label\": a11yTitle,\n    colorProp: color,\n    disabled: disabled,\n    hasIcon: !!icon,\n    focus: focus,\n    hasLabel: label,\n    reverse: reverse,\n    href: !disabled ? href : undefined,\n    onClick: !disabled ? onClick : undefined,\n    onFocus: function onFocus(event) {\n      setFocus(true);\n      if (_onFocus) _onFocus(event);\n    },\n    onBlur: function onBlur(event) {\n      setFocus(false);\n      if (_onBlur) _onBlur(event);\n    }\n  }), first && second ? /*#__PURE__*/React.createElement(Box, {\n    as: \"span\",\n    direction: \"row\",\n    align: \"center\",\n    gap: \"small\",\n    responsive: false,\n    style: {\n      display: 'inline-flex'\n    }\n  }, first, second) : first || second || children);\n});\nAnchor.displayName = 'Anchor';\nvar AnchorDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  AnchorDoc = require('./doc').doc(Anchor);\n}\n\nvar AnchorWrapper = AnchorDoc || Anchor;\nexport { AnchorWrapper as Anchor };","import React from \"react\";\nimport { Box, Text } from \"grommet\";\n\nconst Component = ({ right, message }) => {\n  return (\n    <Box pad=\"small\" fill={true} direction=\"row\">\n      <Box\n        overflow=\"visible\"\n        flex={{ shrink: 0 }}\n        fill={false}\n        round=\"8px\"\n        pad=\"small\"\n        border=\"4px\"\n        background=\"brand\"\n        margin={{ left: right ? \"auto\" : \"0\" }}\n      >\n        <Text>{message.senderName}</Text>\n        <br />\n        {message.message}\n        {message.isThirdPerson}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Component;\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport { StyledIcon } from '../StyledIcon';\nexport var Send = function Send(props) {\n  return /*#__PURE__*/React.createElement(StyledIcon, _extends({\n    viewBox: \"0 0 24 24\",\n    a11yTitle: \"Send\"\n  }, props), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    stroke: \"#000\",\n    strokeWidth: \"2\",\n    d: \"M22,3 L2,11 L20.5,19 L22,3 Z M10,20.5 L13,16 M15.5,9.5 L9,14 L9.85884537,20.0119176 C9.93680292,20.5576204 10.0751625,20.5490248 10.1651297,20.009222 L11,15 L15.5,9.5 Z\"\n  }));\n};","import React, { useState } from \"react\";\nimport { TextInput, Box } from \"grommet\";\nimport { Send } from \"grommet-icons\";\n\nconst Component = ({ onSubmit, placeholder, value = \"\" }) => {\n  const [textInputValue, setTextInputValue] = useState(value);\n  return (\n    <Box border=\"1px solid green\" direction=\"row\">\n      <TextInput\n        placeholder={placeholder}\n        reverse={true}\n        value={textInputValue}\n        onKeyPress={(event) => {\n          if (event.key === \"Enter\") {\n            onSubmit && onSubmit(textInputValue);\n            setTextInputValue(\"\");\n          }\n        }}\n        plain\n        onChange={(event) => {\n          setTextInputValue(event.target.value);\n        }}\n      />\n      <Box\n        onClick={() => {\n          onSubmit && onSubmit(textInputValue);\n          setTextInputValue(\"\");\n        }}\n        pad=\"small\"\n        style={{ height: \"100%\", cursor: \"pointer\" }}\n      >\n        <Send style={{ height: \"100%\", cursor: \"pointer\" }} />\n      </Box>\n    </Box>\n  );\n};\n\nexport default Component;\n","import React, { useEffect, useRef } from \"react\";\nimport { Box } from \"grommet\";\nimport SpeechBubble from \"./SpeechBubble\";\nimport ChatTextInput from \"./ChatTextInput\";\nimport { getQueryString } from \"../../helpers\";\nconst Component = ({\n  messages,\n  onSendMessage,\n  roleProfiles,\n  textInputPlaceholder,\n}) => {\n  const container = useRef(null);\n  const qs = getQueryString();\n  useEffect(() => {\n    container && container.current.scrollTo(0, container.current.scrollHeight);\n  }, [messages]);\n\n  return (\n    <>\n      <div\n        ref={container}\n        style={{\n          borderRadius: \"4px\",\n          border: \"1px solid gray\",\n          overflow: \"scroll\",\n          height: \"calc(100% - 35px)\",\n        }}\n      >\n        <Box>\n          <Box>\n            {messages &&\n              messages.map((message, i) => {\n                return <SpeechBubble message={message} />;\n              })}\n          </Box>\n        </Box>\n      </div>\n      <ChatTextInput\n        value={qs && qs[\"text\"]}\n        placeholder={textInputPlaceholder}\n        onSubmit={onSendMessage}\n      />\n    </>\n  );\n};\n\nexport default Component;\n","import React, { useEffect, useState } from \"react\";\nimport Chat from \"../../components/Chat\";\nimport { Heading } from \"grommet\";\nimport { findChatroomMessage, sendChatroomMessage } from \"../../library/parse\";\nimport EventObserver from \"../EventObserver\";\n\nconst arrangeId = (arr) => {\n  return arr.sort().join(\"_\");\n};\n\nconst Component = ({\n  publicRoom,\n  senderRoleName,\n  recipientRoleName,\n  chatroomName,\n  placeholder,\n}) => {\n  const chatroomId = publicRoom\n    ? recipientRoleName\n    : arrangeId([senderRoleName, recipientRoleName]);\n  const [messages, setMessages] = useState([]);\n  const [createEvent, setCreateEvent] = useState(null);\n\n  const modelToMessage = (models) => {\n    return models.map((c) => {\n      return {\n        message: c.message,\n        senderName: c.name,\n        isThirdPerson: c.role !== senderRoleName,\n      };\n    });\n  };\n\n  useEffect(() => {\n    findChatroomMessage(chatroomId).then((e) => {\n      setMessages(modelToMessage(e));\n    });\n  }, [chatroomId]);\n\n  useEffect(() => {\n    if (createEvent) {\n      findChatroomMessage(chatroomId).then((e) => {\n        setMessages(modelToMessage(e));\n      });\n    }\n  }, [createEvent]);\n\n  return (\n    <>\n      {chatroomName && <Heading level={3}> {chatroomName} </Heading>}\n      <Chat\n        textInputPlaceholder={placeholder}\n        onSendMessage={(e) => {\n          sendChatroomMessage(senderRoleName, publicRoom, e, recipientRoleName);\n        }}\n        messages={messages}\n      />\n      <EventObserver\n        objectClass={\"ChatroomMessage\"}\n        onEvent={(e, action) => {\n          if (action === \"create\") {\n            setCreateEvent(e);\n          }\n        }}\n      />\n    </>\n  );\n};\n\nexport default Component;\n","import styled, { css } from 'styled-components';\nimport { breakpointStyle, genericStyles, normalizeColor, textAlignStyle } from '../../utils';\nimport { defaultProps } from '../../default-props';\n\nvar sizeStyle = function sizeStyle(props) {\n  // size is a combination of the level and size properties\n  var size = props.size || 'medium';\n  var headingTheme = props.theme.heading;\n  var levelStyle = headingTheme.level[props.level];\n\n  if (levelStyle) {\n    var data = levelStyle[size];\n    var styles = [css([\"font-size:\", \";line-height:\", \";max-width:\", \";font-weight:\", \";\"], data ? data.size : size, data ? data.height : 'normal', props.fillProp && 'none' || data && data.maxWidth || levelStyle.medium.maxWidth, levelStyle.font.weight || headingTheme.weight)];\n\n    if (props.responsive && headingTheme.responsiveBreakpoint) {\n      var breakpoint = props.theme.global.breakpoints[headingTheme.responsiveBreakpoint];\n\n      if (breakpoint) {\n        var responsiveData = headingTheme.level[props.level + 1] ? headingTheme.level[props.level + 1][size] : headingTheme.level[props.level][size];\n\n        if (responsiveData) {\n          styles.push(breakpointStyle(breakpoint, \"\\n            font-size: \" + responsiveData.size + \";\\n            line-height: \" + responsiveData.height + \";\\n            max-width: \" + (props.fillProp && 'none' || responsiveData.maxWidth) + \";\\n          \"));\n        }\n      }\n    }\n\n    return styles;\n  }\n\n  console.warn(\"Heading level \" + props.level + \" is not defined in your theme.\");\n  return '';\n};\n\nvar fontFamily = function fontFamily(props) {\n  var _ref = props.theme.heading.level[props.level] || {},\n      font = _ref.font;\n\n  if (font && font.family) {\n    return css([\"font-family:\", \";\"], font.family);\n  }\n\n  return props.theme.heading.font ? css([\"font-family:\", \";\"], props.theme.heading.font.family) : '';\n};\n\nvar truncateStyle = \"\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\";\nvar colorStyle = css([\"color:\", \";\"], function (props) {\n  return normalizeColor(props.colorProp, props.theme);\n});\nvar StyledHeading = styled.h1.withConfig({\n  displayName: \"StyledHeading\",\n  componentId: \"sc-1rdh4aw-0\"\n})([\"\", \" \", \" \", \" \", \" \", \" \", \" \", \"\"], genericStyles, function (props) {\n  return fontFamily(props);\n}, function (props) {\n  return sizeStyle(props);\n}, function (props) {\n  return props.textAlign && textAlignStyle;\n}, function (props) {\n  return props.truncate && truncateStyle;\n}, function (props) {\n  return props.colorProp && colorStyle;\n}, function (props) {\n  return props.theme.heading && props.theme.heading.extend;\n});\nStyledHeading.defaultProps = {};\nObject.setPrototypeOf(StyledHeading.defaultProps, defaultProps);\nexport { StyledHeading };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef } from 'react';\nimport { StyledHeading } from './StyledHeading';\nvar Heading = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      fill = _ref.fill,\n      level = _ref.level,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"color\", \"fill\", \"level\"]); // enforce level to be a number\n\n\n  return /*#__PURE__*/React.createElement(StyledHeading, _extends({\n    as: \"h\" + level,\n    colorProp: color,\n    fillProp: fill,\n    level: +level\n  }, rest, {\n    ref: ref\n  }));\n});\nHeading.displayName = 'Heading';\nHeading.defaultProps = {\n  level: 1,\n  responsive: true\n};\nvar HeadingDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  HeadingDoc = require('./doc').doc(Heading);\n}\n\nvar HeadingWrapper = HeadingDoc || Heading;\nexport { HeadingWrapper as Heading };","import Parse from \"../library/parse\";\nlet liveClient;\nif (!liveClient) {\n  liveClient = new Parse.LiveQueryClient({\n    applicationId: \"32hrI9O4UWscR1vOtkNt62eoLtZgyS9SUIEwp0HL\",\n    serverURL: \"wss://bidbid.b4a.io\", // Example: 'wss://livequerytutorial.back4app.io'\n    javascriptKey: \"tnEpnIhi6dUdW3IcBxWcOegn6UvrcM1dIk6VfK5w\",\n    sessionToken: Parse.User.current()\n      ? Parse.User.current().getSessionToken()\n      : undefined,\n  });\n  liveClient.open();\n}\nexport default liveClient;\n\nexport const queryEvent = (client) => {\n  const query = new Parse.Query(\"Event\");\n  query.ascending(\"createdAt\").limit(5);\n  return client.subscribe(query);\n};\n","import React from \"react\";\nimport rtClient from \"../library/Realtime\";\nimport Parse from \"../library/parse\";\n\nclass Home extends React.Component {\n  componentDidMount() {\n    const { onEvent, objectClass } = this.props;\n    if (objectClass) {\n      var query = new Parse.Query(objectClass);\n      query.ascending(\"createdAt\").limit(5);\n      const subscription = rtClient.subscribe(query);\n      subscription.on(\"create\", (e) => onEvent && onEvent(e, \"create\"));\n      subscription.on(\"update\", (e) => onEvent && onEvent(e, \"update\"));\n      subscription.on(\"delete\", (e) => onEvent && onEvent(e, \"delete\"));\n    }\n  }\n\n  componentWillUnmount() {\n    rtClient.close();\n  }\n  render() {\n    return <></>;\n  }\n}\n\nexport default Home;\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useContext, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { Box } from '../Box';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { focusStyle, genericStyles, unfocusStyle, useForwardedRef } from '../../utils';\nvar StyledList = styled.ul.withConfig({\n  displayName: \"List__StyledList\",\n  componentId: \"sc-130gdqg-0\"\n})([\"list-style:none;\", \" padding:0;\", \" &:focus{\", \"}\", \"}\", \"}\"], function (props) {\n  return !props.margin && 'margin: 0;';\n}, genericStyles, function (props) {\n  return props.tabIndex >= 0 && focusStyle({\n    forceOutline: true,\n    skipSvgChildren: true\n  });\n}, function (props) {\n  return props.itemFocus && focusStyle({\n    forceOutline: true,\n    skipSvgChildren: true\n  });\n}, function (props) {\n  return props.theme.list && props.theme.list.extend;\n});\nvar StyledItem = styled(Box).withConfig({\n  displayName: \"List__StyledItem\",\n  componentId: \"sc-130gdqg-1\"\n})([\"\", \" &:focus{\", \"}\", \"\"], function (props) {\n  return props.onClick && \"cursor: pointer;\";\n}, unfocusStyle({\n  forceOutline: true,\n  skipSvgChildren: true\n}), function (props) {\n  return props.theme.list && props.theme.list.item && props.theme.list.item.extend;\n});\n\nvar normalize = function normalize(item, index, property) {\n  if (typeof property === 'function') {\n    return property(item, index);\n  }\n\n  return item[property];\n};\n\nvar List = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var action = _ref.action,\n      as = _ref.as,\n      background = _ref.background,\n      border = _ref.border,\n      children = _ref.children,\n      data = _ref.data,\n      focus = _ref.focus,\n      itemProps = _ref.itemProps,\n      pad = _ref.pad,\n      primaryKey = _ref.primaryKey,\n      secondaryKey = _ref.secondaryKey,\n      step = _ref.step,\n      onClickItem = _ref.onClickItem,\n      onMore = _ref.onMore,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"action\", \"as\", \"background\", \"border\", \"children\", \"data\", \"focus\", \"itemProps\", \"pad\", \"primaryKey\", \"secondaryKey\", \"step\", \"onClickItem\", \"onMore\"]);\n\n  var listRef = useForwardedRef(ref);\n  var theme = useContext(ThemeContext);\n\n  var _useState = useState(),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(),\n      itemFocus = _useState2[0],\n      setItemFocus = _useState2[1];\n\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onClickItem && active >= 0 ? function (event) {\n      event.persist();\n      var adjustedEvent = event;\n      adjustedEvent.item = data[active];\n      adjustedEvent.index = active;\n      onClickItem(adjustedEvent);\n    } : undefined,\n    onUp: onClickItem && active ? function () {\n      setActive(active - 1);\n    } : undefined,\n    onDown: onClickItem && data && data.length ? function () {\n      setActive(active >= 0 ? Math.min(active + 1, data.length - 1) : 0);\n    } : undefined\n  }, /*#__PURE__*/React.createElement(StyledList, _extends({\n    ref: listRef,\n    as: as || 'ul',\n    itemFocus: itemFocus,\n    tabIndex: onClickItem ? 0 : undefined\n  }, rest), /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: data,\n    onMore: onMore,\n    scrollableAncestor: \"window\",\n    step: step,\n    renderMarker: function renderMarker(marker) {\n      return /*#__PURE__*/React.createElement(Box, {\n        as: \"li\",\n        flex: false\n      }, marker);\n    }\n  }, function (item, index) {\n    var content;\n    var boxProps = {};\n\n    if (children) {\n      content = children(item, index, onClickItem ? {\n        active: active === index\n      } : undefined);\n    } else if (primaryKey) {\n      if (typeof primaryKey === 'function') {\n        content = primaryKey(item, index);\n      } else {\n        content = /*#__PURE__*/React.createElement(Text, {\n          key: \"p\",\n          weight: \"bold\"\n        }, normalize(item, index, primaryKey));\n      }\n\n      if (secondaryKey) {\n        if (typeof secondaryKey === 'function') {\n          content = [content, secondaryKey(item, index)];\n        } else {\n          content = [content, /*#__PURE__*/React.createElement(Text, {\n            key: \"s\"\n          }, normalize(item, index, secondaryKey))];\n        }\n\n        boxProps = {\n          direction: 'row',\n          align: 'center',\n          justify: 'between',\n          gap: 'medium'\n        };\n      }\n    } else if (typeof item === 'object') {\n      content = item[Object.keys(item)[0]];\n    } else {\n      content = item;\n    }\n\n    if (action) {\n      content = [/*#__PURE__*/React.createElement(Box, {\n        align: \"start\",\n        key: \"actionContainer\" + index\n      }, content), action(item, index)];\n      boxProps = {\n        direction: 'row',\n        align: secondaryKey ? 'start' : 'center',\n        justify: 'between',\n        gap: 'medium'\n      };\n    }\n\n    var adjustedBackground = background || theme.list.item.background;\n\n    if (active === index) {\n      adjustedBackground = theme.global.hover.background;\n    } else if (Array.isArray(adjustedBackground)) {\n      adjustedBackground = adjustedBackground[index % adjustedBackground.length];\n    }\n\n    var adjustedBorder = border !== undefined ? border : theme.list.item.border;\n\n    if (adjustedBorder === 'horizontal' && index) {\n      adjustedBorder = 'bottom';\n    }\n\n    if (itemProps && itemProps[index]) {\n      boxProps = _extends({}, boxProps, itemProps[index]);\n    }\n\n    var clickProps;\n\n    if (onClickItem) {\n      clickProps = {\n        tabIndex: -1,\n        active: active === index,\n        onClick: function onClick(event) {\n          // extract from React's synthetic event pool\n          event.persist();\n          var adjustedEvent = event;\n          adjustedEvent.item = item;\n          adjustedEvent.index = index;\n          onClickItem(adjustedEvent); // put focus on the List container to meet WCAG\n          // accessibility guidelines that focus remains on `ul`\n\n          listRef.current.focus();\n        },\n        onMouseOver: function onMouseOver() {\n          return setActive(index);\n        },\n        onMouseOut: function onMouseOut() {\n          return setActive(undefined);\n        },\n        onFocus: function onFocus() {\n          setActive(index);\n          setItemFocus(true);\n        },\n        onBlur: function onBlur() {\n          setActive(undefined);\n          setItemFocus(false);\n        }\n      };\n    }\n\n    return /*#__PURE__*/React.createElement(StyledItem, _extends({\n      key: index,\n      tag: \"li\",\n      flex: false,\n      pad: pad || theme.list.item.pad,\n      background: adjustedBackground,\n      border: adjustedBorder\n    }, boxProps, clickProps), content);\n  })));\n});\nList.displayName = 'List';\nvar ListDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  ListDoc = require('./doc').doc(List); // eslint-disable-line global-require\n}\n\nvar ListWrapper = ListDoc || List;\nexport { ListWrapper as List };","import styled, { css } from 'styled-components';\nimport { borderStyle, edgeStyle, genericStyles } from '../../utils';\nimport { defaultProps } from '../../default-props';\n\nvar fillStyle = function fillStyle(fill) {\n  if (!fill) {\n    return fill;\n  }\n\n  if (fill === 'horizontal') {\n    return 'width: 100%;';\n  }\n\n  if (fill === 'vertical') {\n    return 'height: 100%;';\n  }\n\n  return \"\\n      width: 100%;\\n      height: 100%;\\n    \";\n};\n\nvar ALIGN_MAP = {\n  center: 'center',\n  end: 'flex-end',\n  start: 'flex-start',\n  stretch: 'stretch'\n};\nvar alignStyle = css([\"align-items:\", \";\"], function (props) {\n  return ALIGN_MAP[props.align];\n});\nvar ALIGN_CONTENT_MAP = {\n  around: 'space-around',\n  between: 'space-between',\n  center: 'center',\n  end: 'flex-end',\n  start: 'flex-start',\n  stretch: 'stretch'\n};\nvar alignContentStyle = css([\"align-content:\", \";\"], function (props) {\n  return ALIGN_CONTENT_MAP[props.alignContent];\n});\nvar JUSTIFY_MAP = {\n  center: 'center',\n  end: 'flex-end',\n  start: 'flex-start',\n  stretch: 'stretch'\n};\nvar justifyStyle = css([\"justify-items:\", \";\"], function (props) {\n  return JUSTIFY_MAP[props.justify];\n});\nvar JUSTIFY_CONTENT_MAP = {\n  around: 'space-around',\n  between: 'space-between',\n  center: 'center',\n  end: 'flex-end',\n  start: 'flex-start',\n  stretch: 'stretch'\n};\nvar justifyContentStyle = css([\"justify-content:\", \";\"], function (props) {\n  return JUSTIFY_CONTENT_MAP[props.justifyContent];\n});\n\nvar gapStyle = function gapStyle(props) {\n  if (typeof props.gap === 'string') {\n    var gapSize = props.theme.global.edgeSize[props.gap] || props.gap;\n    return \"grid-gap: \" + gapSize + \" \" + gapSize + \";\";\n  }\n\n  if (props.gap.row && props.gap.column) {\n    return \"\\n      grid-row-gap: \" + (props.theme.global.edgeSize[props.gap.row] || props.gap.row) + \";\\n      grid-column-gap: \" + (props.theme.global.edgeSize[props.gap.column] || props.gap.column) + \";\\n    \";\n  }\n\n  if (props.gap.row) {\n    return \"\\n      grid-row-gap: \" + (props.theme.global.edgeSize[props.gap.row] || props.gap.row) + \";\\n    \";\n  }\n\n  if (props.gap.column) {\n    return \"\\n      grid-column-gap: \" + (props.theme.global.edgeSize[props.gap.column] || props.gap.column) + \";\\n    \";\n  }\n\n  return '';\n};\n\nvar SIZE_MAP = {\n  flex: '1fr',\n  full: '100%',\n  '1/2': '50%',\n  '1/4': '25%',\n  '2/4': '50%',\n  '3/4': '75%',\n  '1/3': '33.33%',\n  '2/3': '66.66%'\n};\n\nvar getRepeatCount = function getRepeatCount(count) {\n  return typeof count === 'number' ? count : \"auto-\" + count;\n};\n\nvar getRepeatSize = function getRepeatSize(size, theme) {\n  if (Array.isArray(size)) {\n    return \"minmax(\" + (theme.global.size[size[0]] || size[0]) + \", \" + (theme.global.size[size[1]] || size[1]) + \")\";\n  }\n\n  if (size === 'flex') return '1fr';\n  return \"minmax(\" + (theme.global.size[size] || size) + \", 1fr)\";\n};\n\nvar sizeFor = function sizeFor(size, props, isRow) {\n  var mapped = SIZE_MAP[size];\n\n  if (isRow && mapped && (!props.fillContainer || props.fillContainer === 'horizontal')) {\n    console.warn('Grid needs `fill` when using fractional row sizes');\n  }\n\n  return mapped || props.theme.global.size[size] || size;\n};\n\nvar columnsStyle = function columnsStyle(props) {\n  if (Array.isArray(props.columns)) {\n    return css([\"grid-template-columns:\", \";\"], props.columns.map(function (s) {\n      if (Array.isArray(s)) {\n        return \"minmax(\" + sizeFor(s[0], props) + \", \" + sizeFor(s[1], props) + \")\";\n      }\n\n      return sizeFor(s, props);\n    }).join(' '));\n  }\n\n  if (typeof props.columns === 'object') {\n    return css([\"grid-template-columns:repeat( \", \",\", \" );\"], getRepeatCount(props.columns.count), getRepeatSize(props.columns.size, props.theme));\n  }\n\n  return css([\"grid-template-columns:repeat( auto-fill,\", \" );\"], getRepeatSize(props.columns, props.theme));\n};\n\nvar rowsStyle = function rowsStyle(props) {\n  if (Array.isArray(props.rowsProp)) {\n    return css([\"grid-template-rows:\", \";\"], props.rowsProp.map(function (s) {\n      if (Array.isArray(s)) {\n        return \"minmax(\" + sizeFor(s[0], props, true) + \", \" + sizeFor(s[1], props, true) + \")\";\n      }\n\n      return sizeFor(s, props, true);\n    }).join(' '));\n  }\n\n  return css([\"grid-auto-rows:\", \";\"], props.theme.global.size[props.rowsProp]);\n};\n\nvar areasStyle = function areasStyle(props) {\n  // translate areas objects into grid-template-areas syntax\n  if (!Array.isArray(props.rowsProp) || !Array.isArray(props.columns)) {\n    console.warn('Grid `areas` requires `rows` and `columns` to be arrays.');\n  }\n\n  if (Array.isArray(props.areas) && props.areas.every(function (area) {\n    return Array.isArray(area);\n  })) {\n    return \"grid-template-areas: \" + props.areas.map(function (area) {\n      return \"\\\"\" + area.join(' ') + \"\\\"\";\n    }).join(' ') + \";\";\n  }\n\n  var cells = props.rowsProp.map(function () {\n    return props.columns.map(function () {\n      return '.';\n    });\n  });\n  props.areas.forEach(function (area) {\n    for (var row = area.start[1]; row <= area.end[1]; row += 1) {\n      for (var column = area.start[0]; column <= area.end[0]; column += 1) {\n        cells[row][column] = area.name;\n      }\n    }\n  });\n  return \"grid-template-areas: \" + cells.map(function (r) {\n    return \"\\\"\" + r.join(' ') + \"\\\"\";\n  }).join(' ') + \";\";\n};\n\nvar StyledGrid = styled.div.attrs(function (props) {\n  return {\n    'aria-label': props.a11yTitleProp\n  };\n}).withConfig({\n  displayName: \"StyledGrid\",\n  componentId: \"sc-1wofa1l-0\"\n})([\"display:grid;box-sizing:border-box;\", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \"\"], genericStyles, function (props) {\n  return props.border && (Array.isArray(props.border) ? props.border.map(function (border) {\n    return borderStyle(border, props.responsive, props.theme);\n  }) : borderStyle(props.border, props.responsive, props.theme));\n}, function (props) {\n  return fillStyle(props.fillContainer);\n}, function (props) {\n  return props.align && alignStyle;\n}, function (props) {\n  return props.alignContent && alignContentStyle;\n}, function (props) {\n  return props.areas && areasStyle(props);\n}, function (props) {\n  return props.columns && columnsStyle(props);\n}, function (props) {\n  return props.gap && gapStyle(props);\n}, function (props) {\n  return props.justify && justifyStyle;\n}, function (props) {\n  return props.justifyContent && justifyContentStyle;\n}, function (props) {\n  return props.pad && edgeStyle('padding', props.pad, props.responsive, props.theme.global.edgeSize.responsiveBreakpoint, props.theme);\n}, function (props) {\n  return props.rowsProp && rowsStyle(props);\n}, function (props) {\n  return props.theme.grid && props.theme.grid.extend;\n});\nStyledGrid.defaultProps = {};\nObject.setPrototypeOf(StyledGrid.defaultProps, defaultProps);\nexport { StyledGrid };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef } from 'react';\nimport { StyledGrid } from './StyledGrid';\nvar Grid = /*#__PURE__*/forwardRef(function (props, ref) {\n  var a11yTitle = props.a11yTitle,\n      border = props.border,\n      fill = props.fill,\n      _props$responsive = props.responsive,\n      responsive = _props$responsive === void 0 ? true : _props$responsive,\n      rows = props.rows,\n      tag = props.tag,\n      as = props.as,\n      rest = _objectWithoutPropertiesLoose(props, [\"a11yTitle\", \"border\", \"fill\", \"responsive\", \"rows\", \"tag\", \"as\"]);\n\n  return /*#__PURE__*/React.createElement(StyledGrid, _extends({\n    ref: ref,\n    a11yTitleProp: a11yTitle,\n    as: !as && tag ? tag : as,\n    border: border,\n    fillContainer: fill,\n    responsive: responsive,\n    rowsProp: rows\n  }, rest));\n});\nGrid.displayName = 'Grid';\nvar GridDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  GridDoc = require('./doc').doc(Grid); // eslint-disable-line global-require\n}\n\nvar GridWrapper = GridDoc || Grid;\nGridWrapper.available = typeof window !== 'undefined' && window.CSS && window.CSS.supports && window.CSS.supports('display', 'grid');\nexport { GridWrapper as Grid };","import React, { useEffect, useState } from \"react\";\nimport { Anchor, List, Box } from \"grommet\";\nimport { findChatroomForUser, getRolePublicProfile } from \"../../library/parse\";\n\nconst Home = ({ initialActiveId, senderRoleName }) => {\n  const [chatroom, setChatroom] = useState([]);\n  const [activeRoom] = useState(initialActiveId || 0);\n  const [profileLookup, setProfileLookup] = useState({});\n\n  useEffect(() => {\n    const loadChatroom = async () => {\n      const chatrooms = await findChatroomForUser(senderRoleName);\n      setChatroom(chatrooms);\n\n      const roleNames = chatrooms.reduce((p, n) => {\n        return p.concat(n.get(\"uniqueName\").split(\"_\"));\n      }, []);\n      const publicRoles = await getRolePublicProfile(roleNames);\n      const clookup = chatrooms.reduce((p, c) => {\n        const names = c\n          .get(\"uniqueName\")\n          .split(\"_\")\n          .filter((e) => e !== senderRoleName);\n        p[c.id] = names\n          .map((n) => {\n            const found = publicRoles.find(\n              (pr) => pr.role && pr.role.get(\"name\") === n\n            );\n            if (found) {\n              return (\n                found &&\n                found.rolePublicProfile &&\n                found.rolePublicProfile.get(\"name\")\n              );\n            } else {\n              return \"\";\n            }\n          })\n          .join(\" \");\n        return p;\n      }, {});\n      setProfileLookup(clookup);\n    };\n\n    loadChatroom();\n  }, [senderRoleName]);\n  return (\n    <>\n      <Box fill={true} direction=\"row\">\n        <List\n          width=\"100%\"\n          children={(item) => {\n            const recipientName = profileLookup[item.id];\n            const recipientRoleName = item\n              .get(\"uniqueName\")\n              .split(\"_\")\n              .filter((e) => e !== senderRoleName);\n            return (\n              <Box\n                pad=\"small\"\n                background={activeRoom === item.objectId ? \"light-2\" : \"white\"}\n              >\n                <Anchor\n                  href={`/chat/r/${senderRoleName}/c/${recipientRoleName}`}\n                >\n                  {recipientName}\n                </Anchor>\n              </Box>\n            );\n          }}\n          pad=\"0\"\n          primaryKey=\"name\"\n          data={chatroom}\n        />\n      </Box>\n    </>\n  );\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport { Grid, Box } from \"grommet\";\nimport Chatroom from \"../Chatroom\";\nimport { getRolePublicProfile } from \"../../library/parse\";\nimport ChatroomList from \"./ChatroomList\";\nconst Home = ({ senderRoleName, recipientRoleName }) => {\n  const [recipentProfile, setRecipentProfile] = useState(null);\n\n  useEffect(() => {\n    getRolePublicProfile([recipientRoleName]).then((e) => {\n      e && e.length && setRecipentProfile(e[0].rolePublicProfile);\n    });\n  }, [recipientRoleName]);\n  return (\n    <>\n      <Grid\n        gap=\"small\"\n        pad=\"small\"\n        fill\n        areas={[\n          { name: \"chat\", start: [0, 0], end: [0, 0] },\n          { name: \"room\", start: [1, 0], end: [1, 0] },\n        ]}\n        columns={[\"3/4\", \"1/4\"]}\n        rows={[\"auto\"]}\n      >\n        <Box fill={true} gridArea=\"room\" direction=\"row\">\n          <ChatroomList\n            senderRoleName={senderRoleName}\n            recipientRoleName={recipientRoleName}\n            onActive={() => {}}\n          />\n        </Box>\n        <Box gridArea=\"chat\" pad=\"medium\" height=\"405px\">\n          {senderRoleName && (\n            <Chatroom\n              chatroomName={recipentProfile && recipentProfile.get(\"name\")}\n              senderRoleName={senderRoleName}\n              recipientRoleName={recipientRoleName}\n              publicRoom={false}\n            />\n          )}\n        </Box>\n      </Grid>\n    </>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport Chat from \"../containers/Chat\";\n\nconst Home = () => {\n  return (\n    <>\n      <Router basepath=\"/chat\">\n        <Chat path={`/r/:senderRoleName/c/:recipientRoleName`} />\n      </Router>\n    </>\n  );\n};\n\nexport default Home;\n"],"sourceRoot":""}
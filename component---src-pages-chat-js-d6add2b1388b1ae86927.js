(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"6Rr0":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("otPn"),i=n("XDYV"),c=function(e){var t=e.right,n=e.message;return a.a.createElement(o.a,{pad:"small",fill:!0,direction:"row"},a.a.createElement(o.a,{overflow:"visible",flex:{shrink:0},fill:!1,round:"8px",pad:"small",border:"4px",background:"brand",margin:{left:t?"auto":"0"}},a.a.createElement(i.a,null,n.senderName),a.a.createElement("br",null),n.message,n.isThirdPerson))},u=n("P3Am"),s=n("jCe7");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){return a.a.createElement(s.a,l({viewBox:"0 0 24 24",a11yTitle:"Send"},e),a.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M22,3 L2,11 L20.5,19 L22,3 Z M10,20.5 L13,16 M15.5,9.5 L9,14 L9.85884537,20.0119176 C9.93680292,20.5576204 10.0751625,20.5490248 10.1651297,20.009222 L11,15 L15.5,9.5 Z"}))},m=function(e){var t=e.onSubmit,n=Object(r.useState)(""),i=n[0],c=n[1];return a.a.createElement(o.a,null,a.a.createElement(u.a,{icon:a.a.createElement(f,{style:{cursor:"pointer"}}),reverse:!0,value:i,onKeyPress:function(e){"Enter"===e.key&&(t&&t(i),c(""))},onChange:function(e){c(e.target.value)}}))},d=function(e){var t=e.messages,n=e.onSendMessage,i=(e.roleProfiles,Object(r.useRef)(null));return Object(r.useEffect)((function(){i&&i.current.scrollTo(0,i.current.scrollHeight)}),[t]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:i,style:{overflow:"scroll",height:"calc(100% - 35px)"}},a.a.createElement(o.a,null,a.a.createElement(o.a,null,t&&t.map((function(e,t){return a.a.createElement(c,{message:e})}))))),a.a.createElement(m,{onSubmit:n}))},p=n("ACV0"),g=n("LXcg"),b=n("ECLh");t.a=function(e){var t=e.publicRoom,n=e.senderRoleName,o=e.recipientRoleName,i=e.chatroomName,c=t?o:[n,o].sort().join("_"),u=Object(r.useState)([]),s=u[0],l=u[1],f=Object(r.useState)(null),m=f[0],h=f[1],v=function(e){return e.map((function(e){return{message:e.message,senderName:e.name,isThirdPerson:e.role!==n}}))};return Object(r.useEffect)((function(){Object(g.h)(c).then((function(e){l(v(e))}))}),[c]),Object(r.useEffect)((function(){m&&Object(g.h)(c).then((function(e){l(v(e))}))}),[m]),a.a.createElement(a.a.Fragment,null,i&&a.a.createElement(p.a,{level:3}," ",i," "),a.a.createElement(d,{onSendMessage:function(e){Object(g.r)(n,t,e,o)},messages:s}),a.a.createElement(b.a,{objectClass:"ChatroomMessage",onEvent:function(e,t){"create"===t&&h(e)}}))}},"7t0v":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=n("/Rk8"),c=n("18Yj"),u=n("+Wdg"),s={center:"center",end:"flex-end",start:"flex-start",stretch:"stretch"},l=Object(o.css)(["align-items:",";"],(function(e){return s[e.align]})),f={around:"space-around",between:"space-between",center:"center",end:"flex-end",start:"flex-start",stretch:"stretch"},m=Object(o.css)(["align-content:",";"],(function(e){return f[e.alignContent]})),d={center:"center",end:"flex-end",start:"flex-start",stretch:"stretch"},p=Object(o.css)(["justify-items:",";"],(function(e){return d[e.justify]})),g={around:"space-around",between:"space-between",center:"center",end:"flex-end",start:"flex-start",stretch:"stretch"},b=Object(o.css)(["justify-content:",";"],(function(e){return g[e.justifyContent]})),h={flex:"1fr",full:"100%","1/2":"50%","1/4":"25%","2/4":"50%","3/4":"75%","1/3":"33.33%","2/3":"66.66%"},v=function(e,t){return Array.isArray(e)?"minmax("+(t.global.size[e[0]]||e[0])+", "+(t.global.size[e[1]]||e[1])+")":"flex"===e?"1fr":"minmax("+(t.global.size[e]||e)+", 1fr)"},y=function(e,t,n){var r=h[e];return!n||!r||t.fillContainer&&"horizontal"!==t.fillContainer||console.warn("Grid needs `fill` when using fractional row sizes"),r||t.theme.global.size[e]||e},w=o.default.div.attrs((function(e){return{"aria-label":e.a11yTitleProp}})).withConfig({displayName:"StyledGrid",componentId:"sc-1wofa1l-0"})(["display:grid;box-sizing:border-box;"," "," "," "," "," "," "," "," "," "," "," "," ",""],i.f,(function(e){return e.border&&(Array.isArray(e.border)?e.border.map((function(t){return Object(c.a)(t,e.responsive,e.theme)})):Object(c.a)(e.border,e.responsive,e.theme))}),(function(e){return(t=e.fillContainer)?"horizontal"===t?"width: 100%;":"vertical"===t?"height: 100%;":"\n      width: 100%;\n      height: 100%;\n    ":t;var t}),(function(e){return e.align&&l}),(function(e){return e.alignContent&&m}),(function(e){return e.areas&&function(e){if(Array.isArray(e.rowsProp)&&Array.isArray(e.columns)||console.warn("Grid `areas` requires `rows` and `columns` to be arrays."),Array.isArray(e.areas)&&e.areas.every((function(e){return Array.isArray(e)})))return"grid-template-areas: "+e.areas.map((function(e){return'"'+e.join(" ")+'"'})).join(" ")+";";var t=e.rowsProp.map((function(){return e.columns.map((function(){return"."}))}));return e.areas.forEach((function(e){for(var n=e.start[1];n<=e.end[1];n+=1)for(var r=e.start[0];r<=e.end[0];r+=1)t[n][r]=e.name})),"grid-template-areas: "+t.map((function(e){return'"'+e.join(" ")+'"'})).join(" ")+";"}(e)}),(function(e){return e.columns&&function(e){return Array.isArray(e.columns)?Object(o.css)(["grid-template-columns:",";"],e.columns.map((function(t){return Array.isArray(t)?"minmax("+y(t[0],e)+", "+y(t[1],e)+")":y(t,e)})).join(" ")):"object"==typeof e.columns?Object(o.css)(["grid-template-columns:repeat( ",","," );"],"number"==typeof(t=e.columns.count)?t:"auto-"+t,v(e.columns.size,e.theme)):Object(o.css)(["grid-template-columns:repeat( auto-fill,"," );"],v(e.columns,e.theme));var t}(e)}),(function(e){return e.gap&&function(e){if("string"==typeof e.gap){var t=e.theme.global.edgeSize[e.gap]||e.gap;return"grid-gap: "+t+" "+t+";"}return e.gap.row&&e.gap.column?"\n      grid-row-gap: "+(e.theme.global.edgeSize[e.gap.row]||e.gap.row)+";\n      grid-column-gap: "+(e.theme.global.edgeSize[e.gap.column]||e.gap.column)+";\n    ":e.gap.row?"\n      grid-row-gap: "+(e.theme.global.edgeSize[e.gap.row]||e.gap.row)+";\n    ":e.gap.column?"\n      grid-column-gap: "+(e.theme.global.edgeSize[e.gap.column]||e.gap.column)+";\n    ":""}(e)}),(function(e){return e.justify&&p}),(function(e){return e.justifyContent&&b}),(function(e){return e.pad&&Object(i.c)("padding",e.pad,e.responsive,e.theme.global.edgeSize.responsiveBreakpoint,e.theme)}),(function(e){return e.rowsProp&&function(e){return Array.isArray(e.rowsProp)?Object(o.css)(["grid-template-rows:",";"],e.rowsProp.map((function(t){return Array.isArray(t)?"minmax("+y(t[0],e,!0)+", "+y(t[1],e,!0)+")":y(t,e,!0)})).join(" ")):Object(o.css)(["grid-auto-rows:",";"],e.theme.global.size[e.rowsProp])}(e)}),(function(e){return e.theme.grid&&e.theme.grid.extend}));function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}w.defaultProps={},Object.setPrototypeOf(w.defaultProps,u.a);var O=Object(r.forwardRef)((function(e,t){var n=e.a11yTitle,r=e.border,o=e.fill,i=e.responsive,c=void 0===i||i,u=e.rows,s=e.tag,l=e.as,f=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["a11yTitle","border","fill","responsive","rows","tag","as"]);return a.a.createElement(w,j({ref:t,a11yTitleProp:n,as:!l&&s?s:l,border:r,fillContainer:o,responsive:c,rowsProp:u},f))}));O.displayName="Grid";var E=O;E.available="undefined"!=typeof window&&window.CSS&&window.CSS.supports&&window.CSS.supports("display","grid")},ECLh:function(e,t,n){"use strict";var r,a=n("dI71"),o=n("q1tI"),i=n.n(o),c=n("LXcg");r||(r=new c.e.LiveQueryClient({applicationId:"32hrI9O4UWscR1vOtkNt62eoLtZgyS9SUIEwp0HL",serverURL:"wss://bidbid.b4a.io",javascriptKey:"tnEpnIhi6dUdW3IcBxWcOegn6UvrcM1dIk6VfK5w",sessionToken:c.e.User.current()?c.e.User.current().getSessionToken():void 0})).open();var u=r,s=function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.onEvent,n=e.objectClass;if(n){var r=new c.e.Query(n);r.ascending("createdAt").limit(5);var a=u.subscribe(r);a.on("create",(function(e){return t&&t(e,"create")})),a.on("update",(function(e){return t&&t(e,"update")})),a.on("delete",(function(e){return t&&t(e,"delete")}))}},n.componentWillUnmount=function(){u.close()},n.render=function(){return i.a.createElement(i.a.Fragment,null)},t}(i.a.Component);t.a=s},QQwb:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("YwZP"),i=n("7t0v"),c=n("otPn"),u=n("6Rr0"),s=n("LXcg"),l=n("o0o1"),f=n.n(l),m=(n("ls82"),n("HaE+")),d=n("vOnD"),p=n("ou28"),g=n("4LIN"),b=n("XDYV"),h=n("/Rk8"),v=n("eaSK");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=d.default.ul.withConfig({displayName:"List__StyledList",componentId:"sc-130gdqg-0"})(["list-style:none;"," padding:0;"," &:focus{","}","}","}"],(function(e){return!e.margin&&"margin: 0;"}),h.f,(function(e){return e.tabIndex>=0&&Object(h.e)({forceOutline:!0,skipSvgChildren:!0})}),(function(e){return e.itemFocus&&Object(h.e)({forceOutline:!0,skipSvgChildren:!0})}),(function(e){return e.theme.list&&e.theme.list.extend})),j=Object(d.default)(c.a).withConfig({displayName:"List__StyledItem",componentId:"sc-130gdqg-1"})([""," &:focus{","}",""],(function(e){return e.onClick&&"cursor: pointer;"}),Object(h.n)({forceOutline:!0,skipSvgChildren:!0}),(function(e){return e.theme.list&&e.theme.list.item&&e.theme.list.item.extend})),O=function(e,t,n){return"function"==typeof n?n(e,t):e[n]},E=a.a.forwardRef((function(e,t){var n=e.action,o=e.as,i=e.background,u=e.border,s=e.children,l=e.data,f=(e.focus,e.itemProps),m=e.pad,h=e.primaryKey,E=e.secondaryKey,x=e.step,k=e.onClickItem,S=e.onMore,C=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["action","as","background","border","children","data","focus","itemProps","pad","primaryKey","secondaryKey","step","onClickItem","onMore"]),A=Object(v.a)(t),P=Object(r.useContext)(d.ThemeContext),N=Object(r.useState)(),I=N[0],R=N[1],L=Object(r.useState)(),z=L[0],M=L[1];return a.a.createElement(g.a,{onEnter:k&&I>=0?function(e){e.persist();var t=e;t.item=l[I],t.index=I,k(t)}:void 0,onUp:k&&I?function(){R(I-1)}:void 0,onDown:k&&l&&l.length?function(){R(I>=0?Math.min(I+1,l.length-1):0)}:void 0},a.a.createElement(w,y({ref:A,as:o||"ul",itemFocus:z,tabIndex:k?0:void 0},C),a.a.createElement(p.a,{items:l,onMore:S,scrollableAncestor:"window",step:x,renderMarker:function(e){return a.a.createElement(c.a,{as:"li",flex:!1},e)}},(function(e,t){var r,o={};s?r=s(e,t,k?{active:I===t}:void 0):h?(r="function"==typeof h?h(e,t):a.a.createElement(b.a,{key:"p",weight:"bold"},O(e,t,h)),E&&(r="function"==typeof E?[r,E(e,t)]:[r,a.a.createElement(b.a,{key:"s"},O(e,t,E))],o={direction:"row",align:"center",justify:"between",gap:"medium"})):r="object"==typeof e?e[Object.keys(e)[0]]:e,n&&(r=[a.a.createElement(c.a,{align:"start",key:"actionContainer"+t},r),n(e,t)],o={direction:"row",align:E?"start":"center",justify:"between",gap:"medium"});var l=i||P.list.item.background;I===t?l=P.global.hover.background:Array.isArray(l)&&(l=l[t%l.length]);var d,p=void 0!==u?u:P.list.item.border;return"horizontal"===p&&t&&(p="bottom"),f&&f[t]&&(o=y({},o,f[t])),k&&(d={tabIndex:-1,active:I===t,onClick:function(n){n.persist();var r=n;r.item=e,r.index=t,k(r),A.current.focus()},onMouseOver:function(){return R(t)},onMouseOut:function(){return R(void 0)},onFocus:function(){R(t),M(!0)},onBlur:function(){R(void 0),M(!1)}}),a.a.createElement(j,y({key:t,tag:"li",flex:!1,pad:m||P.list.item.pad,background:l,border:p},o,d),r)}))))}));E.displayName="List";var x=E,k=n("463D"),S=function(e){var t=e.initialActiveId,n=e.senderRoleName,o=Object(r.useState)([]),i=o[0],u=o[1],l=Object(r.useState)(t||0)[0],d=Object(r.useState)({}),p=d[0],g=d[1];return Object(r.useEffect)((function(){(function(){var e=Object(m.a)(f.a.mark((function e(){var t,r,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.g)(n);case 2:return t=e.sent,r=t.reduce((function(e,t){return e.concat(t.get("uniqueName").split("_"))}),[]),u(t),e.next=7,Object(s.o)(r);case 7:a=e.sent,o=t.reduce((function(e,t){var r=t.get("uniqueName").split("_").filter((function(e){return e!==n}));return e[t.id]=r.map((function(e){var t=a.find((function(t){return t.role.get("name")===e}));return t?t.rolePublicProfile.get("name"):""})).join(" "),e}),{}),g(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{fill:!0,direction:"row"},a.a.createElement(x,{width:"100%",children:function(e){var t=p[e.id],r=e.get("uniqueName").split("_").filter((function(e){return e!==n}));return a.a.createElement(c.a,{pad:"small",background:l===e.objectId?"light-2":"white"},a.a.createElement(k.a,{href:"/chat/r/"+n+"/c/"+r},t))},pad:"0",primaryKey:"name",data:i})))},C=function(e){var t=e.senderRoleName,n=e.recipientRoleName,o=Object(r.useState)(null),l=o[0],f=o[1];return Object(r.useEffect)((function(){Object(s.o)([n]).then((function(e){e&&e.length&&f(e[0].rolePublicProfile)}))}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{gap:"small",pad:"small",fill:!0,areas:[{name:"chat",start:[0,0],end:[0,0]},{name:"room",start:[1,0],end:[1,0]}],columns:["3/4","1/4"],rows:["auto"]},a.a.createElement(c.a,{fill:!0,gridArea:"room",direction:"row"},a.a.createElement(S,{senderRoleName:t,recipientRoleName:n,onActive:function(){}})),a.a.createElement(c.a,{gridArea:"chat",pad:"medium",height:"405px"},t&&a.a.createElement(u.a,{chatroomName:l&&l.get("name"),senderRoleName:t,recipientRoleName:n,publicRoom:!1}))))};t.default=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.Router,{basepath:"/chat"},a.a.createElement(C,{path:"/r/:senderRoleName/c/:recipientRoleName"})))}}}]);
//# sourceMappingURL=component---src-pages-chat-js-d6add2b1388b1ae86927.js.map